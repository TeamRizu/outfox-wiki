'use strict';(function(){const t=document.querySelector("#gdoc-search-input"),e=document.querySelector("#gdoc-search-results");let n=!1;t&&(t.addEventListener("focus",s),t.addEventListener("keyup",a));function s(){t.removeEventListener("focus",s),i("/js/groupBy-174feb11c7.min.js"),i("/js/flexsearch-e54a90f706.min.js",function(){const t={tokenize:"forward"},e=t,n="/en.search-data.min.json";e.document={key:"id",index:["title","content"],store:["title","href","parent"]};const s=new FlexSearch.Document(e);window.geekdocSearchIndex=s,c(n,function(e){e.forEach(e=>{window.geekdocSearchIndex.add(e)})})})}function a(){const a={enrich:!0,limit:10};for(;e.firstChild;)e.removeChild(e.firstChild);if(!t.value)return e.classList.remove("has-hits");let s=l(window.geekdocSearchIndex.search(t.value,a));if(s.length<1)return e.classList.remove("has-hits");e.classList.add("has-hits"),n===!0&&(s=groupBy(s,e=>e.parent));const i=[];if(n===!0)for(const t in s){const e=document.createElement("li"),n=e.appendChild(document.createElement("span")),a=e.appendChild(document.createElement("ul"));n.textContent=t,o(s[t],a),i.push(e)}else{const e=document.createElement("li"),t=e.appendChild(document.createElement("span")),n=e.appendChild(document.createElement("ul"));t.textContent="Results",o(s,n),i.push(e)}i.forEach(t=>{e.appendChild(t)})}function o(n,e){const t=[];for(const i of n){const s=document.createElement("li"),a=s.appendChild(document.createElement("span")),o=a.appendChild(document.createElement("a"));if(a.classList.add("flex"),o.href=i.href,o.textContent=i.title,o.classList.add("gdoc-search__entry"),e){e.appendChild(s);continue}t.push(s)}return t}function r(e){if(!e.ok)throw Error(e.statusText);return e}function c(e,t){fetch(e).then(r).then(e=>e.json()).then(e=>t(e)).catch(function(e){console.log(e)})}function l(n){const e=[],t=new Map;for(const s of n)for(const n of s.result)t.has(n.doc.href)||(t.set(n.doc.href,!0),e.push(n.doc));return e}function i(t,n){let e=document.createElement("script");e.defer=!0,e.async=!1,e.src=t,e.onload=n,document.body.appendChild(e)}})()